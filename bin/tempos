#!/usr/bin/env ruby

require 'thor'
require_relative '../lib/tempos/commands'

class TemposCLI < Thor
  class_option :member, default: nil, required: false
  class_option :project, default: nil, required: false
  class_option :timezone, default: nil, required: false

  desc "which", "Display current project"
  def which
    Tempos::Commands::ShowCurrentProject.new.run
  end

  desc "project IDENTIFIER", "Set current project"
  def project(identifier)
    Tempos::Commands::SetCurrentProject.new.run identifier
  end

  desc "status", "Display which projects are started"
  option :'all-users', type: :boolean, default: false, aliases: :A
  option :'all-projects', type: :boolean, default: false, aliases: :a
  def status
    Tempos::Commands::Status.new(options).run
  end

  desc "start", "Start counting time in the current project"
  def start
    Tempos::Commands::Start.new(options).run
  end

  desc "stop", "Stop counting time in the current project"
  def stop
    Tempos::Commands::Stop.new(options).run
  end

  desc "add DURATION", "Add DURATION to the current project"
  def add(duration)
    Tempos::Commands::Add.new(options).run(duration)
  end

  desc "remove DURATION", "Remove DURATION from the current project"
  def remove(duration)
    Tempos::Commands::Remove.new(options).run(duration)
  end
end

TemposCLI.start(ARGV)
